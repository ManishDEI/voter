<!DOCTYPE html>
<html lang="en">
<!--load static tag-->
{% load static %}

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Voter Reistration</title>

  <!-- Bootstrap core CSS -->
  <link href="{% static "vendor/bootstrap/css/bootstrap.min.css" %}" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="{% static "css/scrolling-nav.css" %}" rel="stylesheet">

</head>

<body class="bg-light">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">Voter Registration</a>
      <a class="text-left text-white" href="{% url 'logout'%}?next={{request.path}}">Logout</a>
    </div>
  </nav>


  <div class="row">

   <!-- Registration Form-->
    <div class="col-md-6">
      <div class="card border-info" style="margin-top:100px;margin-left:40px;margin-right:20px">

        <div class="card-header text-white bg-info">
          Registration Form
        </div>

        <div class="card-body bg-light">
         {% if TransactionStatus %}
            <p class="text-white bg-primary">Transaction Status :{{ TransactionStatus }}</p>
          {% endif %}

          <form method="post" enctype="multipart/form-data" action="/submit/">
            {% csrf_token %}
          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="rdcitizen">Are you a Citizen of India?</label>
              </div>
              <div class="form-col" style="margin-left:20px">
                  <input type="radio" id="yes" name="rdcitizen" value="True">
                  <label for="yes">Yes</label><br>
              </div>
              <div class="form-col" style="margin-left:5px">
                  <input type="radio" id="no" name="rdcitizen" value="False">
                  <label for="no">No</label><br>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="rdage">Will you be 18 years older or above before election day?</label>
              </div>
              <div class="form-col" style="margin-left:20px">
                  <input type="radio" id="yes" name="rdage" value="True">
                  <label for="yes">Yes</label><br>
              </div>
              <div class="form-col" style="margin-left:5px">
                  <input type="radio" id="no" name="rdage" value="False">
                  <label for="no">No</label><br>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtfname">First Name:</label>
              </div>
              <div class="form-col" style="margin-left:20px">
                  <input type="text" id="txtfname" name="txtfname" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtlname">Last Name:</label>
              </div>
              <div class="form-col" style="margin-left:20px">
                  <input type="text" id="txtlname" name="txtlname" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtdob">DOB:</label>
              </div>
              <div class="form-col" style="margin-left:60px">
                  <input type="date" id="txtdob" name="txtdob" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtmob">Contact:</label>
              </div>
              <div class="form-col" style="margin-left:38px">
                  +91-
                  <input type="text" id="txtmob" name="txtmob" pattern="^\+?1?\d{9,15}$" maxlength="12" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtadd1">Address:</label>
              </div>
              <div class="form-col" style="margin-left:38px">
                <div class="form-row">
                  <input type="text" id="txtadd1" name="txtadd1" required>
                </div>
                <div class="form-row" style="margin-top:10px">
                  <input type="text" id="txtadd2" name="txtadd2">
                </div>
                <div class="form-row" style="margin-top:10px">
                  <input type="text" id="txtadd3" name="txtadd3">
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtcity">City:</label>
              </div>
              <div class="form-col" style="margin-left:60px">
                  <input type="text" id="txtcity" name="txtcity" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtstate">State:</label>
              </div>
              <div class="form-col" style="margin-left:50px">
                  <input type="text" id="txtstate" name="txtstate" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtpin">PinCode:</label>
              </div>
              <div class="form-col" style="margin-left:28px">
                  <input type="text" id="txtpin" name="txtpin" pattern="^\+?1?\d{9,15}$" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="img">Upload Photo:</label>
              </div>
              <div class="form-col" style="margin-left:20px">
                  <input type="file" id="img" name="img" required>
              </div>
            </div>
          </div>

          <button type="submit">Submit</button>

            
          </form>
        </div>
      </div>
    </div>

    
    <div class="col-md-6">
    <!-- Download Voter Card-->
      <div class="card border-warning" style="margin-top:100px">

        <div class="card-header text-white bg-warning">
          Download Voter Card
        </div>

        <div class="card-body bg-light">
          <form method="post" action="/search/">
            {% csrf_token %}
            <div class="form-group">
            <div class="form-row">
              <div class="form-col">
                  <label for="txtsearch">Enter Registered Mobile No.?</label>
              </div>
              <div class="form-col" style="margin-left:20px">
                  <input type="text" id="txtsearch" name="txtsearch">
              </div>
            </div>
            <div class="form-col" style="margin-left:20px">
              <button type="Submit">Search</button>
            </div>
          </div>

          </form>
          {% if user.stat == "exist" %}
            <table class="table table-bordered table-dark">
            <thead>
             <tr>
                <th>Name</th>
                <th>Voter Card</th>
             </tr>
             </thead>
             <tbody>
             <tr>
                <th>{{ user.Name }} </th>
                <th><a href="/{{ user.contact }}/generate/">Downlaod</a></th>
             </tr>
             </tbody>
            </table>
          {% elif user.stat == "notexist" %}
            <p class="text-danger"> Voter Doesn't exist. Please Register!</p>
          {% endif %}
        </div>
      </div>
    <!--Voter Distribution-->
      <div class="card border-success" style="margin-top:20px">

        <div class="card-header text-white bg-success">
          Voters Distribution
        </div>

        <div class="card-body bg-light">
           <canvas id="voterDistribution"></canvas>
        </div>
      </div>
    </div>
  </div>
  
  

  <!-- Footer -->
  <footer class="py-5 bg-dark" style="margin-top:30px">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; Assignment 2020</p>
    </div>
  </footer>


  <!-- Bootstrap core JavaScript -->
  <script src="{% static "vendor/jquery/jquery.min.js" %}"></script>
  <script src="{% static "vendor/bootstrap/js/bootstrap.bundle.min.js" %}"></script>

  <!-- Plugin JavaScript -->
  <script src="{% static "vendor/jquery-easing/jquery.easing.min.js" %}"></script>

  <!-- Custom JavaScript for this theme -->
  <script src="{% static "js/scrolling-nav.js" %}"></script>

<!-- Dynamic Data for Graphs -->
    <script type="text/javascript">

      var bar_label = JSON.parse("{{voterState|escapejs}}");
      var bar_data = {{ votercount }};
    </script>

  <!-- Adding js for charts  
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>--> 
  <script src="{% static "custom chart\Chart.min.js" %}"></script>
  <script src="{% static "custom chart\voterDistribution.js" %}"></script>

</body>

</html>
